<section class="main_Section">
  {%- unless template == 'index' or template == 'cart' or template == 'list-collections' or template == '404' -%}
  {%- assign t = template | split: '.' | first -%}

  <div class="breadcrumb-collection" role="navigation" aria-label="breadcrumbs">
    <div class="breadcrumb_text">
      <a class="breadcrumbs__link" href="/"><span>Home</span></a>
      <svg class="icon icon--arrow-right" viewBox="0 0 8 12" role="presentation"> <path stroke="currentColor" stroke-width="2" d="M2 2l4 4-4 4" fill="none" stroke-linecap="square"></path></svg>
      {%- case t -%}
      {%- when 'article' -%}
      {{ blog.title | link_to: blog.url }} 
      <a class="breadcrumbs__link" href="{{ article.url }}" aria-current="page"><span>{{ article.title }}</span></a>
      {%- else -%}
      <a class="breadcrumbs__link" href="{{ request.path }}" aria-current="page"><span>{{ page_title }}</span></a>
      {%- endcase -%}
    </div>
  </div>
  {%- endunless -%}
  <div class="main_Customers">
    <div class="box_Left">
      <div class="div_Mobile">
        <button class="show_Menu">
          My addresses
          <svg class="icon icon--arrow-bottom" viewBox="0 0 12 8" role="presentation">
            <path stroke="currentColor" stroke-width="2" d="M10 2L6 6 2 2" fill="none" stroke-linecap="square"></path>
          </svg>
        </button>
        <div class="box_Menu">
          <div class="value-picker__inner">
            <header class="value-picker__header">
              <span class="value-picker__title text--strong">My account</span>
              <button class="value-picker__close" data-action="close-value-picker" aria-controls="account-selector" aria-label="Close"><svg class="icon icon--close" viewBox="0 0 19 19" role="presentation">
                <path d="M9.1923882 8.39339828l7.7781745-7.7781746 1.4142136 1.41421357-7.7781746 7.77817459 7.7781746 7.77817456L16.9705627 19l-7.7781745-7.7781746L1.41421356 19 0 17.5857864l7.7781746-7.77817456L0 2.02943725 1.41421356.61522369 9.1923882 8.39339828z" fill="currentColor" fill-rule="evenodd"></path>
                </svg></button>
            </header>
            <div class="value-picker__choice-list">
              <a href="/account" class="value-picker__choice-item">My orders</a>
              <a href="/account/addresses" class="value-picker__choice-item is-selected">My addresses <svg class="icon icon--check-2" viewBox="0 0 13 11" role="presentation">
                <path d="M1 4.166456L5.317719 9 12 1" stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd"></path>
                </svg></a>
              <a href="/account/logout" class="value-picker__choice-item">Logout </a>
            </div>
          </div>
        </div>
      </div>
      <div class="popover__linklist">
        <a class="popover__link-item" href="/account">My orders</a>
        <a class="popover__link-item is-active" href="/account/addresses">My addresses</a>
        <a class="popover__link-item" href="/account/logout">Logout</a>
      </div>
    </div>
    <main class="account-main">
      <div id="add_address" class="customer_address edit_address" style="display:none;">
        {% form 'customer_address', customer.new_address %}
          <h4 id="add_address_title">{{ 'customer.addresses.add_new' | t }}</h4>

          <label for="address_first_name_new">{{ 'customer.addresses.first_name' | t }}</label>
          <input type="text" id="address_first_name_new" class="address_form" name="address[first_name]" value="{{ form.first_name }}" autocapitalize="words">

          <label for="address_last_name_new">{{ 'customer.addresses.last_name' | t }}</label>
          <input type="text" id="address_last_name_new" class="address_form" name="address[last_name]" value="{{ form.last_name }}" autocapitalize="words">

          <label for="address_company_new">{{ 'customer.addresses.company' | t }}</label>
          <input type="text" id="address_company_new" class="address_form" name="address[company]" value="{{ form.company }}" autocapitalize="words">

          <label for="address_address1_new">{{ 'customer.addresses.address1' | t }}</label>
          <input type="text" id="address_address1_new" class="address_form" name="address[address1]" value="{{ form.address1 }}" autocapitalize="words">

          <label for="address_address2_new">{{ 'customer.addresses.address2' | t }}</label>
          <input type="text" id="address_address2_new" class="address_form" name="address[address2]" value="{{ form.address2 }}" autocapitalize="words">

          <label for="address_city_new">{{ 'customer.addresses.city' | t }}</label>
          <input type="text" id="address_city_new" class="address_form" name="address[city]" value="{{ form.city }}" autocapitalize="words">

          <label for="address_country_new">{{ 'customer.addresses.country' | t }}</label>
          <select id="address_country_new" name="address[country]" data-default="{{ form.country }}">{{ country_option_tags }}</select>

          <div id="address_province_container_new" style="display:none">
            <label for="address_province_new">{{ 'customer.addresses.province' | t }}</label>
            <select id="address_province_new" class="address_form" name="address[province]" data-default="{{ form.province }}"></select>
          </div>

          <label for="address_zip_new">{{ 'customer.addresses.zip' | t }}</label>
          <input type="text" id="address_zip_new" class="address_form" name="address[zip]" value="{{ form.zip }}" autocapitalize="characters">

          <label for="address_phone_new">{{ 'customer.addresses.phone' | t }}</label>
          <input type="tel" id="address_phone_new" class="address_form" name="address[phone]" value="{{ form.phone }}" placeholder="555-555-1234">

          <p>
            {{ form.set_as_default_checkbox }}
            <label for="address_default_address_new" class="inline">{{ 'customer.addresses.set_default' | t }}</label>
          </p>

          <p class="action_bottom">
            <input class="global-button global-button--primary" type="submit" value="{{ 'customer.addresses.add' | t }}" />
            <span class="note"> {{ 'customer.addresses.or' | t }} <a href="#" onclick="Shopify.CustomerAddress.toggleNewForm(); return false;">{{ 'customer.addresses.cancel' | t }}</a></span>
          </p>
        {% endform %}
      </div>
      <h1>My addresses</h1>
      <aside class="account-sidebar">
        <div id="action" class="action_link action_add note">
          <a href="#" class="global-button global-button--primary" onclick="Shopify.CustomerAddress.toggleNewForm(); return false;">{{ 'customer.addresses.add_new' | t }}</a>
        </div>
      </aside>
      <div id="address_tables">
        {% paginate customer.addresses by 10 %}
          {% if customer.addresses.size > 0 %}
            {% for address in customer.addresses %}
              <div class="address_table">
                <div id="view_address_{{ address.id }}" class="customer_address">
                  <h4 class="address_title">{{ address.first_name | capitalize }} {{address.last_name | capitalize }} {% if address == customer.default_address %}({{ 'customer.addresses.default' | t }}){% endif %}
                  </h4>

                  <p class="view_address">
                    {{ address.company }}
                    {{ address.street }}
                    {{ address.city | capitalize }}{% if address.province_code %}, {{ address.province_code | upcase }}{% endif %} {{ address.zip | upcase }}<br>
                    {{ address.country }}
                    {{ address.phone }}
                  </p>

                  <p class="address_actions">
                    <span class="global-button global-button--primary address__action">
                      {{ 'customer.addresses.edit' | t | edit_customer_address_link: address.id }}
                    </span>
                    <span class="global-button global-button--secondary address__action">
                      {{ 'customer.addresses.delete' | t | delete_customer_address_link: address.id }}
                    </span>
                  </p>
                </div>

                <div id="edit_address_{{ address.id }}" class="customer_address edit_address" style="display:none;">
                  {% form 'customer_address', address %}
                    <h4>{{ 'customer.addresses.edit_address' | t }}</h4>

                    <label for="address_first_name_{{ form.id }}">{{ 'customer.addresses.first_name' | t }}</label>
                    <input type="text" id="address_first_name_{{ form.id }}" class="address_form" name="address[first_name]" value="{{ form.first_name }}" autocapitalize="words">

                    <label for="address_last_name_{{ form.id }}">{{ 'customer.addresses.last_name' | t }}</label>
                    <input type="text" id="address_last_name_{{ form.id }}" class="address_form" name="address[last_name]" value="{{ form.last_name }}" autocapitalize="words">

                    <label for="address_company_{{ form.id }}">{{ 'customer.addresses.company' | t }}</label>
                    <input type="text" id="address_company_{{ form.id }}" class="address_form" name="address[company]" value="{{ form.company }}" autocapitalize="words">

                    <label for="address_address1_{{ form.id }}">{{ 'customer.addresses.address1' | t }}</label>
                    <input type="text" id="address_address1_{{ form.id }}" class="address_form" name="address[address1]" value="{{ form.address1 }}" autocapitalize="words">

                    <label for="address_address2_{{ form.id }}">{{ 'customer.addresses.address2' | t }}</label>
                    <input type="text" id="address_address2_{{ form.id }}" class="address_form" name="address[address2]" value="{{ form.address2 }}" autocapitalize="words">

                    <label for="address_city_{{ form.id }}">{{ 'customer.addresses.city' | t }}</label>
                    <input type="text" id="address_city_{{ form.id }}" class="address_form" name="address[city]" value="{{ form.city }}" autocapitalize="words">

                    <label for="address_country_{{ form.id }}">{{ 'customer.addresses.country' | t }}</label>
                    <select id="address_country_{{ form.id}}" name="address[country]" data-default="{{ form.country }}">{{ country_option_tags }}</select>

                    <div id="address_province_container_{{ form.id }}" style="display:none">
                      <label for="address_province_{{ form.id }}">{{ 'customer.addresses.province' | t }}</label>
                      <select id="address_province_{{ form.id }}" class="address_form" name="address[province]" data-default="{{ form.province }}"></select>
                    </div>

                    <label for="address_zip_{{ form.id }}">{{ 'customer.addresses.zip' | t }}</label>
                    <input type="text" id="address_zip_{{ form.id }}" class="address_form" name="address[zip]" value="{{ form.zip }}" autocapitalize="characters">

                    <label for="address_phone_{{ form.id }}">{{ 'customer.addresses.phone' | t }}</label>
                    <input type="tel" id="address_phone_{{ form.id }}" class="address_form" name="address[phone]" value="{{ form.phone }}" placeholder="555-555-1234">

                    <p>
                      {{ form.set_as_default_checkbox }}
                      <label for="address_default_address_new" class="inline">{{ 'customer.addresses.set_default' | t }}</label>
                    </p>

                    <p class="action_bottom">
                      <input type="submit" class="global-button global-button--primary" value="{{ 'customer.addresses.update' | t }}">

                      <span class="note">
                        {{ 'customer.addresses.or' | t }}
                        <a href="#" onclick="Shopify.CustomerAddress.toggleForm({{form.id}}); return false;">{{ 'customer.addresses.cancel' | t }}</a>
                      </span>
                    </p>
                  {% endform %}
                </div>
              </div>
            {% endfor %}

            <br />
          {% else %}
            <p>{{ 'customer.addresses.no_addresses' | t }}</p>
          {% endif %}

          <div id="address_pagination">
            {{ paginate | default_pagination }}
          </div>
        {% endpaginate %}
      </div>
    </main>
  </div>
</section>

<script type="text/javascript" charset="utf-8" data-no-instant>
  // initialize observers on address selectors
  new Shopify.CountryProvinceSelector('address_country_new', 'address_province_new', {hideElement: 'address_province_container_new'});

  {% for address in customer.addresses %}
    new Shopify.CountryProvinceSelector('address_country_{{address.id}}', 'address_province_{{address.id}}', {hideElement: 'address_province_container_{{address.id}}'});
  {% endfor %}
</script>
